
process('Minimal Process') {

	description("This is a minimal process definition")
	
	task ('task1') {
		execute(controller: 'TestController', action: 'approve')
		on('submitted') {
			launch (['task2', 'task3'])
		}
    }

	task ('task2') {
		execute(service: 'messaging', method: 'send')
		on('complete') {
			launch ('task4')
		}
		on('smtpfail') {
			terminate ('task3')
		}
    }

	task ('task3') {
		execute(service: 'im', method: 'send')
		on('delivered') {
			launch ('task4')
		}
		on('brokenpipe') {
			terminate ('task2')
		}
    }

	task('task4') {
		dependencies(['task2', 'task3'])
		finish()
	}
	
}